"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runSequentially = exports.timeout = void 0;
const util_1 = require("util");
/**
 * Resolve a promise after a timeout.
 */
exports.timeout = (0, util_1.promisify)(setTimeout);
/**
 * Run each of the promise sequentially and return their results in the same order.
 *
 * @param {Promiser<T>[]} promisers
 * @returns {Promise<T[]>}
 */
async function runSequentially(promisers) {
    const result = [];
    for (const promiser of promisers) {
        try {
            const value = await promiser();
            result.push(value);
        }
        catch (err) {
            const error = err;
            if (error.error) {
                throw error.error;
            }
            if (error.originalError) {
                throw error.originalError;
            }
            throw error;
        }
    }
    return result;
}
exports.runSequentially = runSequentially;
